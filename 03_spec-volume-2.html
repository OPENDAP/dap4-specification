<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="2024-10-23">
<title>DAP4 Volume 2: Web Services</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>DAP4 Volume 2: Web Services</h1>
<div class="details">
<span id="author" class="author">2024-10-23</span><br>
<span id="revdate">The Data Access Protocol</span>
<br><span id="revremark">DAP Version 4.0</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_terms_and_definitions">2. Terms and Definitions</a>
<ul class="sectlevel2">
<li><a href="#_dap4_resource_roles_and_media_types">2.1. DAP4 Resource Roles and Media Types</a></li>
<li><a href="#_dap4_core_specification_documents">2.2. DAP4 Core Specification Documents</a></li>
<li><a href="#_extensions_to_dap4_core_specifications">2.3. Extensions to DAP4 Core Specifications</a></li>
</ul>
</li>
<li><a href="#_dap4_web_service_responses">3. DAP4 Web Service Responses</a>
<ul class="sectlevel2">
<li><a href="#_dap4_dataset_services_response">3.1. DAP4 Dataset Services Response</a></li>
<li><a href="#_dataset_metadata_response">3.2. Dataset Metadata Response</a></li>
<li><a href="#_dap4_data_response">3.3. DAP4: Data Response</a></li>
<li><a href="#_dap4_error_response">3.4. DAP4 Error Response</a></li>
</ul>
</li>
<li><a href="#_http">4. HTTP</a>
<ul class="sectlevel2">
<li><a href="#_content_negotiation_and_media_types">4.1. Content Negotiation and Media Types</a></li>
<li><a href="#_redirects">4.2. Redirects</a></li>
<li><a href="#_caching_of_responses_and_conditional_requests">4.3. Caching of Responses and Conditional Requests</a></li>
<li><a href="#_authenticationauthorization">4.4. Authentication/Authorization</a></li>
<li><a href="#_headers">4.5. Headers</a></li>
<li><a href="#_status_codes">4.6. Status Codes</a></li>
<li><a href="#_verbs_aka_methods">4.7. Verbs (aka Methods)</a></li>
</ul>
</li>
<li><a href="#_dap4_urls">5. DAP4 URLs</a>
<ul class="sectlevel2">
<li><a href="#_query_string_parameters">5.1. Query String Parameters</a></li>
</ul>
</li>
<li><a href="#_normative_references">6. Normative References</a></li>
<li><a href="#_non_normative_references">7. Non-Normative References</a></li>
<li><a href="#_appendix_ancillary_web_services_beyond_dap4">8. Appendix - Ancillary Web Services (Beyond DAP4)</a>
<ul class="sectlevel2">
<li><a href="#_dap4_html_data_request_form_service">8.1. DAP4: HTML DATA Request Form Service</a></li>
<li><a href="#_dap4_rdf_service">8.2. DAP4: RDF Service</a></li>
<li><a href="#_dap4_iso_19115_service">8.3. DAP4: ISO 19115 Service</a></li>
<li><a href="#_dap4_iso_conformance_score_service">8.4. DAP4: ISO Conformance Score Service</a></li>
<li><a href="#_dap4_netcdf_file_out_service">8.5. DAP4: NetCDF File-out Service</a></li>
<li><a href="#_dap4_ascii_data_service">8.6. DAP4: ASCII Data Service</a></li>
<li><a href="#_dap4_xml_data_service">8.7. DAP4: XML Data Service</a></li>
<li><a href="#_dap4_native_file_access_service">8.8. DAP4: Native File Access Service</a></li>
<li><a href="#_dap4_server_version_service">8.9. DAP4: Server Version Service</a></li>
<li><a href="#_dap2_services">8.10. DAP2 Services</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Copyright 2016</strong> <a href="https://www.ucar.edu/">UCAR</a> and <a href="https://www.opendap.org/">OPeNDAP,Inc</a>.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 1. <strong>Contributors</strong></caption>
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>First Draft</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">November 6, 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Last Revised:</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 July 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Authors</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">John Caron (Unidata)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ethan Davis (Unidata)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">David Fulker (OPeNDAP)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">James Gallagher (OPeNDAP)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dennis Heimbigner (Unidata)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nathan Potter (OPeNDAP)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong><em>Abstract</em></strong></p>
</div>
<div class="paragraph">
<p><em>While Volume 1 of the DAP4 specification addresses the detailed
semantics and structure of the DAP4 data and metadata content, this
volume (Volume 2) details the manner in which clients can request things
from a DAP4 server and what things the clients can expect to receive
from a DAP4 server in response to their requests. The description of
this interaction focuses on DAP4 clients and servers that are
communicating via HTTP, and while this is perceived by the authors as
the most common transport for DAP4 client/server interaction the
specification is written in a broad enough manner to allow for other
transport mechanisms.</em></p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 2. <strong>Timeline of changes.</strong></caption>
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013.09.06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Draft</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014.07.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII/.ascii changed to text/.txt; Removed most of the async text since it is duplicate of the material in the extension; Created a volume 3 containing the extensions</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document defines the DAP4 Web Service protocol which DAP4-compliant
software MUST support when utilizing the HTTP protocol to transmit DAP4
requests and responses, along with additional optional services that
DAP4-compliant software SHOULD support.</p>
</div>
<div class="paragraph">
<p>The DAP4 protocol uses three basic responses to represent a data
resource. One response, the Dataset Metadata Response (DMR) contains
metadata information describing the structure of the data resource. That
is, it characterizes the variables, their datatypes, names and
attributes. The second response, the Data Response (DataDMR), contains
both the metadata about the requested data and the actual data that was
requested. The third basic response is the Dataset Services Response
(DSR) that provides a listing of services, any alternate media
representations if available, and all of the associated access URI’s for
a particular data resource.</p>
</div>
<div class="paragraph">
<p>The DAP4 protocol uses a fourth basic resource, the Constraint/Query
Expression (CE), to represent subsetting of and, possibly,
transformations of the dataset requested.</p>
</div>
<div class="paragraph">
<p>The DAP4 protocol uses a fifth basic resource, the Error Response (ER),
to allow servers to communicate error information with clients. When a
request for any of the three basic responses cannot be completed, an
Error response is returned. If an error occurs before the standard
response is initiated, an error response is returned in place of the
standard response. If an error occurs after a data response has been
initiated, an Error Response is returned as the final chunked record as
described in Section 7 &#8220;DAP4 Chunked Data Representation&#8221; of the DAP4
Data Model
document.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4 Vol.1</a>]</p>
</div>
<div class="paragraph">
<p>The DAP4 Data Model, constraint/query language, dataset metadata XML
encoding, and binary data encoding are all defined in the DAP4 Volume 1:
&#8220;Data Model, Persistent Representations, and Constraints&#8221;
document.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4 Vol.1</a>]</p>
</div>
<div class="paragraph">
<p>Each of the three responses (Dataset Metadata, Data, and Dataset
Services) are complete in and of themselves so that, for example, the
Data response can be used by a client without ever requesting either of
the two other responses. In many cases, client programs will request the
Dataset Metadata response before requesting the Data response but there
is no requirement they do so and servers SHALL NOT require that behavior
on the part of clients.</p>
</div>
<div class="paragraph">
<p>These three standard dataset responses can each be accessed in two
different ways. First, similar to DAP2 URL construction and to support
client-driven content negotiation (see the section titled
<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#Content_Negotiation_and_Media_Types">&#8220;HTTP
- Content Negotiation and Media Types&#8221;</a> below), each dataset resource
has a standard URL suffix that can be added to the DAP4 dataset URL to
retrieve the resource in its standard (normative) encoding. This allows
clients, given a base DAP4 dataset URL, to construct DAP4 URLs in a
simple and standard way for each of the three standard dataset
resources.</p>
</div>
<div class="paragraph">
<p>Second, to support server-driven content negotiation (see the
<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#Content_Negotiation_and_Media_Types">&#8220;HTTP
- Content Negotiation and Media Types&#8221;</a> section below) and
hypermedia-driven style, a DAP4 resource role is defined for each
standard dataset resource and a DAP4 media type is defined for each
dataset resource encoding scheme.</p>
</div>
<div class="paragraph">
<p>Any particular instance of a DAP4 server MAY have one or more additional
services, alternate media representations of service responses, or
unique (to the server instance) server side functions. All of these
things, including the core services and their default representations
MUST be included in the <em>Dataset Services
Response</em>.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_DSR">DAP4 DSR</a>]</p>
</div>
<div class="paragraph">
<p>The DAP4 web service is currently limited to HTTP GET requests though it
is expected that extensions (e.g., asynchronous access) will use other
HTTP methods (e.g., POST). This makes, for now, the DAP4 Constraint
Expression something of a pseudo-resource type given that they are
encoded as part of the URL query string rather than as an independent
document.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions">2. Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dataset Service Response (DSR)<br>
The DAP4 response type that contains a list of DAP (and other) services
available for the dataset including any alternate media representations
and all the associated access URIs.</p>
</div>
<div class="paragraph">
<p>Dataset Metadata Response (DMR)<br>
The DAP4 response type that contains metadata information describing the
structure of the requested data. The metadata information characterizes
the requested data variables including their names, data types, shapes,
and attributes.</p>
</div>
<div class="paragraph">
<p>Dataset Data Response (Data)<br>
The DAP4 response type that contains both the dataset metadata and the
binary data for the requested data.</p>
</div>
<div class="paragraph">
<p>Resource role ID<br>
A URI that identifies the role of a resource, generally provided with a
link to allow clients to identify the type of resource the link
references. (For instance, an &#8220;atom:link&#8221; element has an optional
&#8220;atom:rel&#8221; attribute.)</p>
</div>
<div class="paragraph">
<p>Media Type<br>
A internet media type is a two-part identifier for resource encoding
schemes, e.g. &#8220;text/html&#8221;, &#8220;text/plain&#8221;,
&#8220;application/octet-stream&#8221;. (See
<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#MediaTypes">section
1.1 DAP4 Resource Roles and Media Types</a> of this document)</p>
</div>
<div class="paragraph">
<p>DAP4 Constraint Expression (CE)<br>
The constraint expression that encapsulates various sub-setting of, and
possibly the application of server side functions to variables in a DAP4
dataset.</p>
</div>
<div class="paragraph">
<p>Query String (QS)<br>
Everything after the &#8220;`?`&#8221; character in a URL.</p>
</div>
<div class="sect2">
<h3 id="_dap4_resource_roles_and_media_types">2.1. DAP4 Resource Roles and Media Types</h3>
<div class="paragraph">
<p>The standard DAP4 dataset resource roles and encodings (plus a few
alternate encodings) that are defined in the core DAP4 documents are:</p>
</div>
<div class="paragraph">
<p><strong>Dataset Services Response (DSR)</strong></p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Resource Role</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://services.opendap.org/dap4/dataset-service" class="bare">http://services.opendap.org/dap4/dataset-service</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Suffix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Media Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Example</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>none or &#8220;.dsr&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>application/vnd.opendap.dap4.dataset-services+xml</p>
</div>
<div class="paragraph">
<p>Normative DSR encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc" class="bare">http://server/path/dataset.nc</a><br>
<a href="http://server/path/dataset.nc.dsr" class="bare">http://server/path/dataset.nc.dsr</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.xml&#8221; or &#8220;.dsr.xml&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/xml</p>
</div>
<div class="paragraph">
<p>Normative DSR encoding with generic media type</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.xml" class="bare">http://server/path/dataset.nc.xml</a>
<a href="http://server/path/dataset.nc.dsr.xml" class="bare">http://server/path/dataset.nc.dsr.xml</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.html&#8221; or &#8220;.dsr.html&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/html</p>
</div>
<div class="paragraph">
<p>HTML DSR encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.html" class="bare">http://server/path/dataset.nc.html</a>
<a href="http://server/path/dataset.nc.dsr.html" class="bare">http://server/path/dataset.nc.dsr.html</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Dataset Metadata Response (DMR)</strong></p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Resource Role</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://services.opendap.org/dap4/dataset-metadata" class="bare">http://services.opendap.org/dap4/dataset-metadata</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Suffix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Media Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Example</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dmr&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>application/vnd.opendap.dap4.dataset-metadata+xml</p>
</div>
<div class="paragraph">
<p>Normative DMR encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dmr" class="bare">http://server/path/dataset.nc.dmr</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dmr.xml&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/xml</p>
</div>
<div class="paragraph">
<p>Normative DMR encoding with generic media type</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dmr.xml" class="bare">http://server/path/dataset.nc.dmr.xml</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dmr.html&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/html</p>
</div>
<div class="paragraph">
<p>HTML DMR encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dmr.html" class="bare">http://server/path/dataset.nc.dmr.html</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Dataset Data Response (Data)</strong></p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Resource Role</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://services.opendap.org/dap4/data" class="bare">http://services.opendap.org/dap4/data</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Suffix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Media Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Example</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dap&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>application/vnd.opendap.dap4.data</p>
</div>
<div class="paragraph">
<p>Normative Data encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dap" class="bare">http://server/path/dataset.nc.dap</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dap.txt&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/plain</p>
</div>
<div class="paragraph">
<p>Text (UTF-8) Data encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dap.txt" class="bare">http://server/path/dataset.nc.dap.txt</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>&#8220;.dap.xml&#8221;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/xml</p>
</div>
<div class="paragraph">
<p>XML Data encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="http://server/path/dataset.nc.dap.xml" class="bare">http://server/path/dataset.nc.dap.xml</a></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Error Response (ER)</strong></p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Resource Role</strong>:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://services.opendap.org/dap4/error" class="bare">http://services.opendap.org/dap4/error</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Suffix</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Media Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>URL Example</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>application/vnd.opendap.dap4.error+xml</p>
</div>
<div class="paragraph">
<p>Normative Error encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/xml</p>
</div>
<div class="paragraph">
<p>Normative Error encoding with generic media type</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>text/html</p>
</div>
<div class="paragraph">
<p>HTML Error encoding</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_dap4_core_specification_documents">2.2. DAP4 Core Specification Documents</h3>
<div class="ulist">
<ul>
<li>
<p>DAP4 Volume 1: &#8220;Data Model, Persistence Representations, and
Constraints&#8221;</p>
</li>
<li>
<p>DAP4 Volume 2: Web Services</p>
</li>
<li>
<p>DAP4 Dataset Services</p>
</li>
<li>
<p>DAP4 Requirements for Server-side Functions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_extensions_to_dap4_core_specifications">2.3. Extensions to DAP4 Core Specifications</h3>
<div class="paragraph">
<p>Several types of extensions can be made to the DAP4 core including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New encodings for the core DAP4 response types</p>
</li>
<li>
<p>New response types</p>
</li>
<li>
<p>New server-side functions.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dap4_web_service_responses">3. DAP4 Web Service Responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The core of the DAP4 Web Service protocol consists of the four standard
response types: Dataset Services Response (DSR), Dataset Metadata
Response (DMR), Dataset Data Response (Data), DAP4 Error Response
(Error) Each dataset served by a DAP4 compliant server MUST provide the
DSR, DMR, and Data responses and MUST return errors documents as DAP4
Error Responses.</p>
</div>
<div class="paragraph">
<p>All of the example requests described below are based on the DAP4
dataset URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://server.org:8080/dap/path/data.nc</pre>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_dataset_services_response">3.1. DAP4 Dataset Services Response</h3>
<div class="paragraph">
<p>The DAP4 Dataset Services Response
(DSR)[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_DSR">DAP4 DSR</a>]
provides clients with a listing of all available DAP4 services and all
the available encodings for those services as well as all available DAP4
extensions.</p>
</div>
<div class="paragraph">
<p>Each service (or response type) has a unique resource role (defined in
the appropriate specification), each link (alternate representation) for
a given service MUST fulfill that same role. This is not always a clear
distinction to make. For example, the DAP4 Dataset Metadata Response can
be mapped into ISO 19115 metadata. However, IS0 19115 is clearly a
different domain.</p>
</div>
<div class="paragraph">
<p>The DAP4 Dataset Services Response MUST contain the following
information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>List of DAP versions supported by server</p>
</li>
<li>
<p>The implementation version (e.g., &#8220;TDS 4.3.57&#8221; or &#8220;Hyrax 1.7.45&#8221;)</p>
</li>
<li>
<p>List of all available DAP4 services for the dataset</p>
</li>
<li>
<p>For each DAP4 services listed, a list of all available links each with
its corresponding media type</p>
</li>
<li>
<p>List of supported extensions</p>
<div class="ulist">
<ul>
<li>
<p>Resource type extensions</p>
</li>
<li>
<p>Media type extensions</p>
</li>
<li>
<p>Server-side function extensions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If SHOULD contain the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A human readable title for the dataset</p>
</li>
<li>
<p>A human readable title for each service</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To take advantage of web caching, servers should try to keep DSRs light
weight (i.e., quick creation) and as stable as possible.</p>
</div>
<div class="sect3">
<h4 id="_dsr_resource_role">3.1.1. DSR Resource Role</h4>
<div class="paragraph">
<p>DSRs are identified by the resource role:</p>
</div>
<div class="paragraph">
<p><strong><code><a href="http://services.opendap.org/dap4/dataset-services" class="bare">http://services.opendap.org/dap4/dataset-services</a></code></strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_normative_encoding_of_the_dsr">3.1.2. Normative Encoding of the DSR</h4>
<div class="paragraph">
<p>The normative XML representation for the Dataset Services Response is
defined in the &#8220;Normative XML Encoding of the DSR&#8221; appendix. The media
type for the normative XML representation is</p>
</div>
<div class="paragraph">
<p><code>application/vnd.opendap.dataset-services+xml</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_service_behavior">3.1.3. Service Behavior</h4>
<div class="paragraph">
<p>When an HTTP GET request is made on a base DAP4 dataset URL, all DAP4
servers MUST return the normative XML encoding of the DSR given these
conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the request &#8220;Accept&#8221; header contains only the normative XML encoding
media type,</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header equals &#8220;<strong>/</strong>&#8221;, or</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header does not indicate a preference for
another media type in which the server knows how to encode the DSR.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: application/vnd.opendap.dataset-services+xml
Date: ...</pre>
</div>
</div>
<div class="sect4">
<h5 id="_downgrading_the_normative_xml_encoding_required">Downgrading the Normative XML Encoding (Required)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a base DAP dataset URL with the suffix <code>.xml</code> added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.xml</code></p>
</div>
<div class="paragraph">
<p>the response MUST be the normative representation of the DSR along with
the HTTP <code>Content-Type</code> header set to <code>text/xml</code> . For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.xml HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>The normative XML representation MUST also be returned when an HTTP GET
request is made on a base DAP4 dataset URL (without a suffix) and the
server uses server-driven content negotiation to decide that the best
response for the client would be an HTML encoded DSR. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc HTTP/1.1
Host: server.org:8080
Accept: text/xml</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_encodings_of_the_dsr">3.1.4. Other Encodings of the DSR</h4>
<div class="sect4">
<h5 id="_html_encoding_optional">HTML Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a base DAP dataset URL with the suffix <code>.html</code> added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.html</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with an HTML representation of the DSR, <strong>or</strong>
return an HTTP status of 404 to indicate that an HTML representation of
the DSR is not available. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.html HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the HTML representation MUST also be returned when an HTTP
GET request is made on a base DAP4 dataset URL (without a suffix) and
the server uses server-driven content negotiation to decide that the
best response for the client would be an HTML encoded DSR. For example
this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc HTTP/1.1
Host: server.org:8080
Accept: text/html</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the HTML representation of the DMR, if available. If no such
representation is available then the server MAY return an HTTP status of
404 or even 415.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dataset_metadata_response">3.2. Dataset Metadata Response</h3>
<div class="paragraph">
<p>The Dataset Metadata Service returns the Dataset Metadata Response (DMR)
which is a metadata description of the dataset. The normative
representation of the DMR is an XML document that contains both the
&#8216;syntactic&#8217; (structural) and &#8216;semantic&#8217; metadata for the dataset,
persisted as a DAP4 data model representation of the dataset held at the
server.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>]
The DMR service accepts a query string (constraint expression) that
allows you to inspect the effects on the data structures when
sub-setting and/or server side functions are applied. If a constraint
expression has been successfully applied, the service will returned the
constrained view of the dap:Dataset object. The constrained view may
contain different data structures than the unconstrained view as the
constraint may alter the reasonable representation of the data set. Note
that all dap:Attribute objects have been removed from constrained
dap:Dataset objects. More information on the syntax of DAP4 constraint
expressions can be found in Volume 1 of the DAP4 specification.</p>
</div>
<div class="sect3 opendap org/index php?title=DAP4:_Specification_Volume_2">
<h4 id="DAP4_Vol1[DAP4_Vol1]">DMR Resource Role</h4>
<div class="paragraph">
<p>DMRs are identified by the resource role:</p>
</div>
<div class="paragraph">
<p><strong><code><a href="http://services.opendap.org/dap4/dataset-metadata" class="bare">http://services.opendap.org/dap4/dataset-metadata</a></code></strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_normative_encoding_of_the_dmr">3.2.1. Normative Encoding of the DMR</h4>
<div class="paragraph">
<p>The normative XML representation for the Dataset Metadata Response is
defined in Volume 1 of the DAP4
specification.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>]
The media type for the normative XML representation is:</p>
</div>
<div class="paragraph">
<p><code>application/vnd.opendap.dap4.dataset-metadata+xml</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_service_behavior_2">3.2.2. Service Behavior</h4>
<div class="paragraph">
<p>Every DAP4 compliant server MUST return the normative representation of
the Dataset Metadata Response (an XML document described Volume 1 of the
DAP4 specification
[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>])
when a client attempts to access a dataset URL with the suffix
&#8220;`.dmr`&#8221; appended to it. The DAP4 server MAY return alternate
representations if the client indicates that it can accept them and the
server can provide them.</p>
</div>
<div class="paragraph">
<p>When an HTTP GET request is made on a base DAP dataset URL with the
suffix <code>.dmr</code> added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url + '.dmr' [?dap_constraint]+</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with an normative representation of the DMR for
the (possibly constrained) dataset given these conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the request &#8220;Accept&#8221; header contains only the normative XML encoding
media type (<code>application/vnd.opendap.dap4.dataset-metadata+xml</code>),</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header equals &#8220;<strong>/</strong>&#8221;, or</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header does not indicate a preference for
another media type in which the server knows how to encode the DMR.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dmr HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: application/vnd.opendap.dataset-metadata+xml
Date: ...</pre>
</div>
</div>
<div class="sect4">
<h5 id="_downgrading_the_normative_xml_encoding_required_2">Downgrading the Normative XML Encoding (Required)</h5>
<div class="paragraph">
<p>While the normative representation of the the Dataset Metadata response
is already an XML document, the normative media type is
<code>application/vnd.opendap.dataset-metadata+xml</code> which may be unfamiliar
to many generic clients (such as web browsers) and it is quite
conceivable that such a client might ask for the more generic
<code>text/xml</code> media type.</p>
</div>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP DMR URL with the suffix
<code>.xml</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dmr.xml</code></p>
</div>
<div class="paragraph">
<p>the response MUST be the normative representation of the DMR along with
the HTTP <code>Content-Type</code> header set to <code>text/xml</code> . For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dmr.xml HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>The normative XML representation of the DMR MUST also be returned when
an HTTP GET request is made on a base DAP4 DMR URL ( and the server uses
server-driven content negotiation to decide that the best response for
the client would be an HTML encoded DSR. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dmr HTTP/1.1
Host: server.org:8080
Accept: text/xml</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_encodings_of_the_dmr">3.2.3. Other Encodings of the DMR</h4>
<div class="sect4">
<h5 id="_html_encoding_optional_2">HTML Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP DMR URL with the suffix
<code>.html</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dmr.html</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with an HTML representation of the DMR, <strong>or</strong>
return an HTTP status of 404 (or 415) to indicate that an HTML
representation of the DMR is not available. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dmr.html HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the HTML representation MUST also be returned when an HTTP
GET request is made on a base DAP4 DMR URL (without an additional
suffix) and the server uses server-driven content negotiation to decide
that the best response for the client would be an HTML encoded DMR. For
example this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dmr HTTP/1.1
Host: server.org:8080
Accept: text/html</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the HTML representation of the DMR, if available. If no such
representation is available then the server MAY return an HTTP status of
404 or even 415.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_data_response">3.3. DAP4: Data Response</h3>
<div class="paragraph">
<p>The Data Service provides DAP4 data access to a dataset, and is the
(primary) way that DAP4 returns data to a client. The Data service
accepts a query string (constraint expression) which allows you to
subset the data and invoke server side functions. When the service is
invoked it returns the DAP4 data object. On the wire this is a binary
document with MIME type <em>application/vnd.opendap.dap4.data</em>. The payload
is broken into two logical parts: A DMR-type xml document that describes
the data and a BLOB that contains the actual data. For more on the
information on the Data response and the internal structure of its
payload along with a complete discussion of the DAP4 constraint
expression syntax see Volume 1 of the DAP4
specification.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>]</p>
</div>
<div class="sect3">
<h4 id="_data_response_resource_role">3.3.1. Data Response Resource Role</h4>
<div class="paragraph">
<p>DAP4 Data Responses are identified by the resource role:</p>
</div>
<div class="paragraph">
<p><strong><code>http://services.opendap.org/dap4/data</code></strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_normative_encoding_of_the_data_response">3.3.2. Normative Encoding of the Data Response</h4>
<div class="paragraph">
<p>The normative XML representation for the Data Response is defined in
Volume 1 of the DAP4
specification.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>]
The media type for the normative XML representation is:</p>
</div>
<div class="paragraph">
<p><code>application/vnd.opendap.dap4.data</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_service_behavior_3">3.3.3. Service Behavior</h4>
<div class="paragraph">
<p>Every DAP4 compliant server MUST return the normative representation of
the Data Response when a client attempts to access a dataset URL with
the suffix &#8220;`.dap`&#8221; appended to it. The DAP4 server MAY return
alternate representations if the client indicates that it can accept
them and the server can provide them. The normative representation of
the Data Response is described in Volume 1 of the DAP4
specification.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4_Vol1</a>]</p>
</div>
<div class="paragraph">
<p>When an HTTP GET request is made on a base DAP dataset URL with the
suffix <code>.dap</code> added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url + '.dap' [?dap_constraint]+</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with an normative representation of the (possibly
constrained) data response for the dataset given these conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the request &#8220;Accept&#8221; header contains only the normative XML encoding
media type (<code>application/vnd.opendap.dap4.data</code>),</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header equals &#8220;<strong>/</strong>&#8221;, or</p>
</li>
<li>
<p>the request &#8220;Accept&#8221; header does not indicate a preference for
another media type in which the server knows how to encode the Data
Response.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: application/vnd.opendap.data
Date: ...</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_encodings_of_the_data_response">3.3.4. Other Encodings of the Data Response</h4>
<div class="sect4">
<h5 id="_text_encoding_optional">Text Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP Data Response URL with the
suffix <code>.txt</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dap.txt</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with the text representation of the Data Response
using the utf-8 character set, <strong>or</strong> return an HTTP status of 404 (or
415) to indicate that a text representation of the Data Response is not
available. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap.txt HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/plain; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the text representation MUST also be returned when an HTTP
GET request is made on a base DAP4 Data Response URL (without an
additional suffix) and the server uses server-driven content negotiation
to decide that the best response for the client would be an text encoded
Data Response. For example this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap HTTP/1.1
Host: server.org:8080
Accept: text/plain</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the text representation of the Data Response, if available.
If no such representation is available then the server MAY return an
HTTP status of 404 or even 415.</p>
</div>
</div>
<div class="sect4">
<h5 id="_xml_encoding_optional">XML Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP Data Response URL with the
suffix <code>.xml</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dap.xml</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with the XML representation of the Data Response,
<strong>or</strong> return an HTTP status of 404 (or 415) to indicate that an XML
representation of the Data Response is not available. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap.xml HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the XML representation MUST also be returned when an HTTP
GET request is made on a base DAP4 Data Response URL (without an
additional suffix) and the server uses server-driven content negotiation
to decide that the best response for the client would be an XML encoded
data response. For example this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap HTTP/1.1
Host: server.org:8080
Accept: text/xml</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the XML representation of the Data Response, if available.
If no such representation is available then the server MAY return an
HTTP status of 404 or even 415.</p>
</div>
</div>
<div class="sect4">
<h5 id="_netcdf_3_encoding_optional">NetCDF-3 Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP Data Response URL with the
suffix <code>.nc</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dap.nc</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with a NetCDF-3 representation of the Data
Response, <strong>or</strong> return an HTTP status of 404 (or 415) to indicate that a
NetCDF-3 representation of the Data Response is not available. For
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap.nc HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: application/x-netcdf
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the NetCDF-3 representation MUST also be returned when an
HTTP GET request is made on a base DAP4 Data Response URL (without an
additional suffix) and the server uses server-driven content negotiation
to decide that the best response for the client would be an NetCDF-3
encoded data response. For example this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap HTTP/1.1
Host: server.org:8080
Accept: application/x-netcdf</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the NetCDF-3 representation of the Data Response, if
available. If no such representation is available then the server MAY
return an HTTP status of 404 or even 415.</p>
</div>
</div>
<div class="sect4">
<h5 id="_netcdf_4_encoding_optional">NetCDF-4 Encoding (Optional)</h5>
<div class="paragraph">
<p>When an HTTP GET request is made on a DAP Data Response URL with the
suffix <code>.nc4</code><br>
added to it:</p>
</div>
<div class="paragraph">
<p>request url = <code>dataset_url.dap.nc4</code></p>
</div>
<div class="paragraph">
<p>the server MUST reply with a NetCDF-4 representation of the Data
Response, <strong>or</strong> return an HTTP status of 404 (or 415) to indicate that a
NetCDF-4 representation of the Data Response is not available. For
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap.nc HTTP/1.1
Host: server.org:8080
Accept: */*</pre>
</div>
</div>
<div class="paragraph">
<p>Might result in the following response:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HTTP/1.1 200 OK
Content-Type: application/x-netcdf;ver=4
Date: ...</pre>
</div>
</div>
<div class="paragraph">
<p>If available, the NetCDF-4 representation MUST also be returned when an
HTTP GET request is made on a base DAP4 Data Response URL (without an
additional suffix) and the server uses server-driven content negotiation
to decide that the best response for the client would be an NetCDF-4
encoded data response. For example this request:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap HTTP/1.1
Host: server.org:8080
Accept: application/x-netcdf;ver=4</pre>
</div>
</div>
<div class="paragraph">
<p>Must return the NetCDF-4 representation of the Data Response, if
available. If no such representation is available then the server MAY
return an HTTP status of 404 or even 415.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_error_response">3.4. DAP4 Error Response</h3>
<div class="paragraph">
<p>The DAP4 protocol returns error information using an Error response. If
a request for any of the three basic responses cannot be completed then
an Error response is returned in its place.</p>
</div>
<div class="paragraph">
<p>The normative XML representation for the Error Response is defined by
the following RELAX-NG schema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;grammar</span> <span class="na">xmlns=</span><span class="s">"http://relaxng.org/ns/structure/1.0"</span>
                <span class="na">xmlns:doc=</span><span class="s">"http://www.example.com/annotation"</span>
                <span class="na">datatypeLibrary=</span><span class="s">"http://xml.opendap.org/datatypes/dap4"</span>
                <span class="na">ns=</span><span class="s">"http://xml.opendap.org/ns/DAP/4.0#"</span>
                <span class="nt">&gt;</span>
<span class="nt">&lt;start&gt;</span>
  <span class="nt">&lt;ref</span> <span class="na">name=</span><span class="s">"errorresponse"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/start&gt;</span>
<span class="nt">&lt;define</span> <span class="na">name=</span><span class="s">"errorresponse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">"Error"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;optional&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">"httpcode"</span><span class="nt">&gt;&lt;data</span> <span class="na">type=</span><span class="s">"dap4_integer"</span><span class="nt">/&gt;&lt;/attribute&gt;</span>
    <span class="nt">&lt;/optional&gt;</span>
    <span class="nt">&lt;optional&gt;</span>
      <span class="nt">&lt;interleave&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name =</span> <span class="s">"Message"</span><span class="nt">&gt;&lt;text/&gt;&lt;/Message&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name =</span> <span class="s">"Context"</span><span class="nt">&gt;&lt;text/&gt;&lt;/Message&gt;</span>
        <span class="nt">&lt;element</span> <span class="na">name =</span> <span class="s">"OtherInformation"</span><span class="nt">&gt;&lt;text/&gt;&lt;/Message&gt;</span>
      <span class="nt">&lt;/interleave&gt;</span>
    <span class="nt">&lt;/optional&gt;</span>
  <span class="nt">&lt;/element&gt;</span>
<span class="nt">&lt;/define&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Error element has one optional attribute: the <em>httpcode</em> which is a
standard HTTP protocol return code indicating the general class of
error. When possible, this code should match the return code in the HTTP
headers for the response.</p>
</div>
<div class="paragraph">
<p>The body of the &lt;Error&gt; element may contain any or all of the following
inner elements each containing arbitrary text.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>&lt;Message&gt; — A short informative message describing the error.</p>
</li>
<li>
<p>&lt;Context&gt; — Information describing the context in which the error
occurred: position of a parse error in a constraint expression, for
example.</p>
</li>
<li>
<p>&lt;OtherInformation&gt; — Arbitrary additional text information: a Java
stack trace, for example.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_error_response_resource_role">3.4.1. Error Response Resource Role</h4>
<div class="paragraph">
<p>DAP4 Error Responses are identified by the resource role:</p>
</div>
<div class="paragraph">
<p><strong><code><a href="http://services.opendap.org/dap4/error" class="bare">http://services.opendap.org/dap4/error</a></code></strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_normative_encoding_of_the_error_response">3.4.2. Normative Encoding of the Error Response</h4>
<div class="paragraph">
<p>The normative XML representation for the Error Response is defined in
Appendix x &#8220;Normative XML Encoding of the Error Response&#8221;. The media
type for the normative XML representation is:</p>
</div>
<div class="paragraph">
<p><code>application/vnd.opendap.dap4.error.xml</code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http">4. HTTP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DAP4 Web Services specification describes the features of HTTP that
are required to be a compliant DAP4 client or server. It does not
attempt to describe all aspects of HTTP that DAP4 servers might
implement or that DAP4 clients may see in response to DAP4 requests.
Similarly, it does not cover all issues related to the performance and
scalability of HTTP.</p>
</div>
<div class="paragraph">
<p>However, the following sections include both DAP4 requirements as well
as some suggestions of HTTP features that servers and clients are
encouraged to use.</p>
</div>
<div class="sect2">
<h3 id="_content_negotiation_and_media_types">4.1. Content Negotiation and Media Types</h3>
<div class="paragraph">
<p>Though the DAP4 core specifications only describe one encoding for each
type of resource, DAP4 web servers MAY have the ability to provide a
given resource in a number of different media types. All media types
available for a resource MUST be listed in the DAP4 Dataset Services
response document.</p>
</div>
<div class="paragraph">
<p>DAP4 responses MUST use the &#8220;Content-Type&#8221; header field to identify
the media type of the DAP4 response body. For example, the normative
value for the XML encoded DMR response is
<em>application/vnd.opendap.dap4.dataset-metadata+xml</em>.</p>
</div>
<div class="paragraph">
<p>The DAP4 Dataset Services response describes the available services and
their media types, and through this description provides DAP4 software
(client and/or server) with two different mechanisms to negotiate for
different kinds of media representations. The first mechanism is
server-driven content negotiation as described in the HTTP 1.1
specification, section 12, <code>Content
Negotiation</code> [<a href="#RFC2616_S12">12</a>]
The second mechanism is similar to the agent-driven negotiation also
described in section 12 of the HTTP 1.1 specification. The difference
being that the &#8220;list of available representations … [each with] its own
URI&#8221; is provided by the DAP4 Dataset Services response rather than in
response to an initial request.</p>
</div>
<div class="paragraph">
<p>Clients need not retrieve the Dataset Services response in order to
access the normative representations of either the Dataset Metadata or
Data responses, as these responses are required for every DAP4 server
and are mapped to well known URL patterns. If clients attempt to access
other representations or other services using agent-driven negotiation
without first checking the Dataset Services response, they should be
prepared to receive a 404 <code>Not Found</code> response [<a href="#RFC2616_S10_4_5">7</a>].</p>
</div>
<div class="paragraph">
<p>When using server-driven negotiation, DAP4 clients are encouraged to, at
a minimum, include <code>Accept</code> [<a href="#RFC2616_S14_1">14</a>] and <code>User-Agent</code> [<a href="#RFC2616_S14_43">17</a>]
headers in their requests and to provide accurate and detailed
information in the values of those headers. However, when server-driven
negotiation is used, DAP4 servers are not limited to those headers for
determining the media type that is returned. DAP4 clients should also be
prepared to handle 415 <code>Unsupported Media type</code> [<a href="#RFC2616_S10_4_16">10</a>] response codes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_redirects">4.2. Redirects</h3>
<div class="paragraph">
<p>While HTTP redirects are not directly part of the DAP4 web protocol it
is strongly suggested that DAP4 client implementations be capable of
processing HTTP redirects as nominally described in the HTTP-1.1
specification sections on <code>Redirection Status Codes</code> [<a href="#RFC2616_S10_3">3</a>] and <code>Redirection
Response Headers</code>[<a href="#RFC2616_S14_30">16</a>]. (It is suggested that implementers of DAP4 clients
utilize an existing robust HTTP client library that will manage this for them.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_caching_of_responses_and_conditional_requests">4.3. Caching of Responses and Conditional Requests</h3>
<div class="paragraph">
<p>While, HTTP caching and conditional requests are not explicitly part of
the DAP4 web protocol, they do provide important tools for improving the
performance of both sides client server interaction. Therefore, it is
strongly suggested that DAP4 servers and client implementers be aware of
how <code>HTTP caching</code> [<a href="#RFC2616_S13">13</a>] works, and utilize it for working with DAP servers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_authenticationauthorization">4.4. Authentication/Authorization</h3>
<div class="paragraph">
<p>Authentication is the process by which a user agent establishes the
identity of the user to a server, and the server establishes it’s
identity with the user agent. While, HTTP authentication is not
explicitly part of the DAP4 web protocol, it does provide important
tools for securing the client server interaction. Therefore, it is
strongly suggested that DAP4 servers and client implementers be aware of
how <code>HTTP authentication</code> works [<a href="#RFC2617">19</a>], and utilize it for working with DAP
servers. Server implementers should pay particular attention to <code>HTTP security
considerations</code>[<a href="#RFC2616_S15">18</a>].</p>
</div>
<div class="paragraph">
<p>Authorization is the process through which a server determines who/what
has access to its various holdings and services. The HTTP protocol does
not directly address the issue of authorization (even though HTTP
defines the 401 response status using the word &#8220;authorization&#8221; it does
not provide separate semantics for authentication and authorization
which we see as an important distinction for data access), but any DAP4
server implementer should be aware that some kind of mechanism for
controlling access to holdings and services will likely be desired by
the people that install and operate their software.</p>
</div>
</div>
<div class="sect2">
<h3 id="_headers">4.5. Headers</h3>
<div class="sect3">
<h4 id="_request_headers">4.5.1. Request Headers</h4>
<div class="paragraph">
<p>These are the HTTP request headers that DAP clients using HTTP MAY
utilize. DAP4 servers MUST accept these headers and act on them in a
manner consistent with their descriptions below.</p>
</div>
<div class="sect4">
<h5 id="_general">General</h5>
<div class="paragraph">
<p><strong>Accept</strong><br>
The HTTP Accept header MAY be used by clients that wish to engage in
server-dirven content negotiation by requesting a particular
representation of a resource in the initial request. The server MUST
utilize this header, if present, in a manner consistent with the HTTP
content negotiation specification [<a href="#RFC2616_S12">12</a>]]</p>
</div>
<div class="paragraph">
<p><strong>User-Agent</strong><br>
The HTTP User-Agent header MAY be used by clients to indicate their
&#8220;software identity&#8221; to the server [<a href="#RFC2616_S14_43">17</a>]. The server
MAY utilize this header, if present, to alter the
Content-Type of the response to something that is more likely to be
digestible by the requesting client
software [<a href="#RFC2616_S14_17">15</a>].</p>
</div>
</div>
<div class="sect4">
<h5 id="_dap_specific">DAP Specific</h5>
<div class="paragraph">
<p>There are no DAP specific headers required to make a general DAP
request.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_response_headers">4.5.2. Response Headers</h4>
<div class="paragraph">
<p>These are the HTTP response headers that DAP servers using HTTP MUST and
SHOULD (as indicated) return.</p>
</div>
<div class="sect4">
<h5 id="_general_2">General</h5>
<div class="paragraph">
<p><strong>Date</strong><br>
DAP4 servers MUST return an HTTP <strong>Date</strong> header whose value is the time
of the response and which MUST be in RFC 1123 date/time
format [<a href="#RFC1123">20</a>].</p>
</div>
<div class="paragraph">
<p><strong>Last-Modified</strong><br>
DAP4 servers SHOULD return an HTTP <strong>Last-Modified</strong> header whose value is
the last modified time of the request resource and which MUST be in RFC
1123 date/time format[<a href="#RFC1123">20</a>].</p>
</div>
<div class="paragraph">
<p>Content-Type<br>
DAP4 servers MUST return an HTTP <strong>Content-Type</strong> header, the value of
which SHOULD be set in accordance with the Dap4 Resource Roles and Media
Types discussion in section 1.1 of this document.</p>
</div>
<div class="paragraph">
<p>Content-Description<br>
DAP4 servers SHOULD return an HTTP <strong>Content-Description</strong> header.</p>
</div>
<div class="paragraph">
<p>Content-Disposition<br>
DAP4 servers SHOULD return an HTTP <strong>Content-Disposition</strong> header when
transmitting file typed responses.</p>
</div>
<div class="paragraph">
<p>Content-Encoding<br>
DAP4 servers MUST return an HTTP <strong>Content-Encoding</strong> header when the
content-coding of an entity is not &#8220;identity&#8221;.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dap_specific_2">DAP Specific</h5>
<div class="paragraph">
<p>X-DAP-Server<br>
DAP4 servers SHOULD return the <strong>X-DAP-Server</strong> HTTP header. This HTTP
header is used in a response to communicate the software version of the
server. This may be a simple string with the server name and version
number, or multiple software component versions may be represented. The
value of this header is a string determined by the implementations
author(s).</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>X-DAP-Server: bes/3.10.0, libdap/3.11.2, dap-server/ascii/4.1.2,
csv_handler/1.0.2, freeform_handler/3.8.4, fits_handler/1.0.7,
fileout_netcdf/1.1.2, gateway_module/1.1.0, hdf4_handler/3.9.4,
hdf5_handler/1.5.0, netcdf_handler/3.10.0, ncml_module/1.2.1,
dap-server/usage/4.1.2, dap-server/www/4.1.2, xml_data_handler/1.0.1</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>X-DAP-Server: TDS-4.19.3</p>
</div>
<div class="paragraph">
<p>X-DAP<br>
DAP4 servers MUST return the <strong>X-DAP</strong> HTTP header. This HTTP header is
used in a response to indicate the DAP protocol version used to encode
the content of the response. This value is constrained to a format of
<em>"`major_version`" dot "`minor version`"</em>, where both major_version and
minor_version are represented by an integer value.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>X-DAP: 4.0</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>X-DAP: 2.17</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_status_codes">4.6. Status Codes</h3>
<div class="paragraph">
<p>DAP servers that provide an HTTP interface are expected to utilize the
HTTP response codes in a manner consistent with the HTTP 1.1
specification [<a href="#RFC2616">1</a>].</p>
</div>
<div class="paragraph">
<p>The ones that are detailed here are used by the DAP in a manner
consistent with the specifications definition, but in support of
specific DAP server behavior.</p>
</div>
<div class="sect3">
<h4 id="_200_ok">4.6.1. 200 OK</h4>
<div class="paragraph">
<p>A server MUST return an HTTP status of 200 when the request has been
successful and that the returned document contains the requested
resource. However since DAP responses can be quite large and since it is
also possible for the server to encounter any number of problems during
the marshaling, serialization, and subsequent transmission of the
response it is possible that the server may have committed/transmitted
the HTTP headers (in which the status value is transmitted) before a
subsequent error is encountered. These types of errors are transmitted
in the DAP4 over-the-wire protocol and all DAP4 clients MUST be able to
read and process these errors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_400_bad_request">4.6.2. 400 Bad Request</h4>
<div class="paragraph">
<p>The HTTP specification defines this status code as:</p>
</div>
<div class="paragraph">
<p>_The request could not be understood by the server due to malformed
syntax. The client SHOULD NOT repeat the request without
modifications [<a href="#RFC2616_S10_4_1">4</a>]</p>
</div>
<div class="paragraph">
<p>DAP4 servers utilizes this code to mean the following.</p>
</div>
<div class="sect4">
<h5 id="_400_bad_dap4_request_syntax">400 Bad DAP4 Request Syntax</h5>
<div class="paragraph">
<p>The <strong>400 Bad DAP4 Request Syntax</strong> HTTP response code MUST be returned by
the server when there is a problem with the syntax of the OPeNDAP URL.
The problem could be in the formulation of the constraint expression, or
it may be that the URL extension did not match any that are recognized
by this server.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_401_unauthorized">4.6.3. 401 Unauthorized</h4>
<div class="paragraph">
<p>The <strong>401 Unauthorized</strong> HTTP response code MUST be returned by the server
when access to the requested resource requires (not previously acquired)
user authentication. See the HTTP specification-1.1 for usage and
behavior [<a href="#RFC2616_S10_4_2">5</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="_403_forbidden">4.6.4. 403 Forbidden</h4>
<div class="paragraph">
<p>The <strong>403 Forbidden</strong> HTTP response code MUST be returned when the server
has understood the request, but is refusing to fulfill it. Authorization
will not help and the request SHOULD NOT be repeated. This is
appropriate to return if, for example, the server software does not have
read permission for the requested resource [<a href="#RFC2616_S10_4_4">6</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="_404_not_found">4.6.5. 404 Not Found</h4>
<div class="paragraph">
<p>The <strong>404 Not Found</strong> HTTP response code MUST be returned when the server
has not found anything matching the Request-URI [<a href="#RFC2616_S10_4_5">7</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="_415_unsupported_media_type">4.6.6. 415 Unsupported Media Type</h4>
<div class="paragraph">
<p>The <strong>415 Unsupported Media Type</strong> HTTP response code MUST be returned
when the client requests a representation of the requested resource that
the server cannot provide [<a href="#RFC2616_S10_4_16">10</a>].</p>
</div>
</div>
<div class="sect3">
<h4 id="_500_internal_server_error">4.6.7. 500 Internal Server Error</h4>
<div class="paragraph">
<p>The <strong>500 Internal Server Error</strong> status code SHOULD be returned when the
DAP server encounters internal problems when attempting to fulfill a
request [<a href="#RFC2616_S10_5_1">11</a>].</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verbs_aka_methods">4.7. Verbs (aka Methods)</h3>
<div class="sect3">
<h4 id="_get">4.7.1. GET</h4>
<div class="paragraph">
<p>A DAP4 request may be made using the HTTP GET request method utilizing a
Uniform Resource Identifier (URI) that encodes information specific to
the DAP4.</p>
</div>
<div class="paragraph">
<p>Each GET request MUST conform to the HTTP specification (which basically
says that a GET request MUST contain an HTTP protocol version number
followed by a MIME-like message containing various headers that further
describe the request.). While there are some optional DAP4 HTTP request
headers that may be used, DAP4 requests do not require specific HTTP
headers beyond those necessary for HTTP (see section 4.5.1 Request
Headers of this document for more). DAP4 servers SHOULD support the use
of the HTTP Accept request header to allow clients to engage in HTTP
content negotiation for specific representations of a requested DAP4
response [RFC2616_S12[12]].</p>
</div>
<div class="paragraph">
<p>The DAP server responds to the GET request with an HTTP compliant
response (one that includes a status line containing the HTTP protocol
version and an error or success code, followed by HTTP response headers
and then response itself). There are two DAP specific HTTP headers that
are always included in a DAP response over HTTP: X-DAP-Server and X-DAP,
as described in section 4.5.2 of this document. The DAP response is the
payload of the HTTP response. Unless otherwise negotiated, the data
response payload is encoded using the chunked format as described in
[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4
Vol.1</a>], while the other responses are simple HTTP responses.</p>
</div>
<div class="sect4">
<h5 id="_examples">Examples</h5>
<div class="paragraph">
<p>HTTP GET request.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>GET /dap/path/data.nc.dap?/u,/v[0:8:1024] HTTP/1.1
Host: server.org
Accept: application/vnd.opendap.dap4.data</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dap4_urls">5. DAP4 URLs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In DAP4 we divide a dataset URL into two sections, the <em>identifier</em> and
the <em>query string</em>. The <em>identifier</em> section is everything up to
&#8220;<em>?</em>&#8221; character. The <em>query string</em> is the &#8220;<em>?</em>&#8221; character and
everything after it.</p>
</div>
<div class="paragraph">
<p>For example in the URL:</p>
</div>
<div class="paragraph">
<p><strong><a href="http://test.opendap.org:8080/opendap/data/nc/fnoc1.nc.dmr?dap4.ce=/u;/lat;/lon" class="bare">http://test.opendap.org:8080/opendap/data/nc/fnoc1.nc.dmr?dap4.ce=/u;/lat;/lon</a></strong></p>
</div>
<div class="paragraph">
<p>We have:</p>
</div>
<div class="paragraph">
<p><em>identifier =</em>
<strong><a href="http://test.opendap.org:8080/opendap/data/nc/fnoc1.nc.dmr" class="bare">http://test.opendap.org:8080/opendap/data/nc/fnoc1.nc.dmr</a></strong></p>
</div>
<div class="paragraph">
<p><em>query string =</em> <strong>?dap4.ce=/u;/lat;/lon</strong></p>
</div>
<div class="paragraph">
<p>Additionally DAP4 URLs conform to the web convention in which the query
string is decomposed as a set of key-value pairs (KVP) separated from
each other by &#8220;<strong>&amp;</strong>&#8221; characters:</p>
</div>
<div class="paragraph">
<p><code>?key=value&amp;key=value&amp;key=value ...</code></p>
</div>
<div class="paragraph">
<p>Many web services utilize this pattern, including OGC. The DAP2
constraint expression subsumed the entire query string, so it did not
fit into the standard KVP model. Tomcat (and other web server
frameworks) provide specific API methods for collecting the KVP from the
query string, but again DAP2 doesn’t play well with this. The DAP4
constraint is designed to operate in a KVP environment.</p>
</div>
<div class="sect2">
<h3 id="_query_string_parameters">5.1. Query String Parameters</h3>
<div class="ulist">
<ul>
<li>
<p>DAP4 query string parameters will always begin with the 5 character
string &#8220;<strong>dap4.</strong>&#8221; In this way query string parameters associated with
the DAP4 protocol can be easily identified by both people and software.</p>
</li>
<li>
<p>DAP4 query string keys are case sensitive.</p>
</li>
<li>
<p>DAP4 servers MUST treat ALL values of query string KVPs as case
sensitive.</p>
</li>
<li>
<p>Each DAP4 key may appear once in each query string (request URL).</p>
</li>
<li>
<p>The order of the keys does not matter, and unrecognized keys are
ignored, along with their values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The DAP4 protocol reserves the exclusive use of all future query string
keys that begin with the 4 character token &#8220;<strong>dap4.</strong>&#8221; This way future
DAP4 service features may be added and invoked through the query string
section of the request URL without interfering with other features and
behaviors added to service implementations outside of the DAP4
development process.</p>
</div>
<div class="paragraph">
<p>The following keys are reserved.</p>
</div>
<div class="paragraph">
<p>dap4.ce<br>
The DAP4 constraint expression is contained in a single query string
parameter named &#8220;<strong>dap4.ce</strong>&#8221; This constraint expression contains all
of the subsetting information for the dataset include the projection
(which variables are to be returned), slicing (how the various arrays
are to be decimated), and filtering (conditional retrieval of values).
The fill discussion of the syntax of the constraint expression can be
found in Section 8 of Volume 1 of the DAP4 specification.</p>
</div>
<div id="DAP4_Vol1[DAP4 Vol" class="paragraph opendap org/index php?title=DAP4:_Specification_Volume_2 1]">
<p>dap4.async<br>
The asynchronous response behavior is described in detail in Section 10
of Volume 1 of the DAP4
Specification.[<a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_2#DAP4_Vol1">DAP4 Vol.1</a>]
While the a DAP4 server’s asynchronous response behavior can be
controlled by a savvy client using HTTP headers it can also be managed
using the DAP4 query string parameter &#8220;<strong>dap4.async</strong>&#8221;</p>
</div>
<div class="paragraph">
<p>dap4.func<br>
While server-side functions are not addressed in the initial DAP4
specification or constraint expression syntax we do anticipate them
being defined (in short order) in an extension to the DAP4
specification. For now we are working with a proposed server side
function syntax in which a server side function is invoked as a key
value pair, something like: <strong>dap4.func=ugr5(0,v,z,”10&lt;lat&lt;30”)</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_normative_references">6. Normative References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.opendap.org/index.php?title=DAP4:_Specification_Volume_1">DAP4
Volume 1: Data Model&#44; Persistent Representations&#44; and
Constraints</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="RFC2616"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html">Hypertext Transfer Protocol – HTTP/1.1</a>.</p>
</li>
<li>
<p><a id="RFC2616_S10_2_3"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.2.3">HTTP/1.1 Section 10.2.3 - Accepted</a></p>
</li>
<li>
<p><a id="RFC2616_S10_3"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.3">HTTP/1.1 Section 10.3 - Redirection Status Codes</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_1"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.1">HTTP/1.1 Section 10.4.1 - Bad Request</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_2"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.2">HTTP/1.1 Section 10.4.2 - Unauthorized</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_4"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.4">HTTP/1.1 Section 10.4.4 - Forbidden</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_5"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.5">HTTP/1.1 Section 10.4.5 - Not Found</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_10"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.10">HTTP/1.1 Section 10.4.10 - Conflict</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_13"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.13">HTTP/1.1 Section 10.4.13 - Precondition Failed</a></p>
</li>
<li>
<p><a id="RFC2616_S10_4_16"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.4.16">HTTP/1.1 Section 10.4.16 - Unsupported Media Type</a></p>
</li>
<li>
<p><a id="RFC2616_S10_5_1"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-10.5.1">HTTP/1.1 Section 10.5.1 - Internal Server Error</a></p>
</li>
<li>
<p><a id="RFC2616_S12"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-12">HTTP/1.1 Section 12 - Content Negotiation</a></p>
</li>
<li>
<p><a id="RFC2616_S13"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-13">HTTP/1.1 Section 13 - Caching</a></p>
</li>
<li>
<p><a id="RFC2616_S14_1"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-14.1">HTTP/1.1 Section 14.1 - Accept Header</a></p>
</li>
<li>
<p><a id="RFC2616_S14_17"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-14.17">HTTP/1.1 Section 14.17 - Content-Type Header</a></p>
</li>
<li>
<p><a id="RFC2616_S14_30"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-14.30">HTTP/1.1 Section 14.30 - Redirection Response Headers</a></p>
</li>
<li>
<p><a id="RFC2616_S14_43"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-14.43">HTTP/1.1 Section 14.43 - User-Agent Header</a></p>
</li>
<li>
<p><a id="RFC2616_S15"></a> <a href="https://www.rfc-editor.org/rfc/rfc2616.html#section-15">HTTP/1.1 Section 15 - Security Considerations</a></p>
</li>
<li>
<p><a id="RFC2617"></a> <a href="https://www.rfc-editor.org/rfc/rfc2617.html">HTTP Authentication</a></p>
</li>
<li>
<p><a id="RFC1123"></a> <a href="https://www.ietf.org/rfc/rfc1123.txt">Requirements for Internet Hosts</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_non_normative_references">7. Non-Normative References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>[REST] R. Fielding, UC Irvine Doctoral Thesis: &#8220;Architectural Styles
and the Design of Network-based Software Architectures&#8221;</p>
</div>
<div class="paragraph">
<p>[MediaType] Wikipedia: Internet Media Type</p>
</div>
<hr>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_ancillary_web_services_beyond_dap4">8. Appendix - Ancillary Web Services (Beyond DAP4)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DAP4 servers MAY offer a number of other services that, while not
exactly DAP4 services per say, are commonly available. This section
lists some of the alternate services a DAP4 server might provide. By
enumerating the available services in the Dataset Services Response
servers can easily make software clients and the people that use them
aware of the server’s ancillary capabilities.</p>
</div>
<div class="sect2">
<h3 id="_dap4_html_data_request_form_service">8.1. DAP4: HTML DATA Request Form Service</h3>
<div class="paragraph">
<p>The HTML DATA Request Form Service provides browser based access to the
Dataset. When invoked it returns a web-browser renderable document (in
html) that provides a form (or other UI) that can be used to constrain
and request data in accordance with the DAP4 specification as applied to
the dataset .</p>
</div>
<div class="paragraph">
<p>suffix = <code>.html</code><br>
service url = <code>dataset_url + .html</code><br>
role id = <code>http://services.opendap.org/dap4/data-request-form#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/html</code> | <code>text/xhtml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_rdf_service">8.2. DAP4: RDF Service</h3>
<div class="paragraph">
<p>The RDF service provides an RDF representation of the Dataset document
(DDX). The RDF response is an XML document containing an RDF version of
the
<a href="https://docs.opendap.org/index.php?title=DAP4:_Responses#Dataset_Response">DAP4:
Dataset Response.</a></p>
</div>
<div class="paragraph">
<p>suffix = <code>.rdf</code><br>
service url = <code>dataset_url + .rdf</code><br>
role id = <code>http://services.opendap.org/dap4/rdf#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>application/rdf+xml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_iso_19115_service">8.3. DAP4: ISO 19115 Service</h3>
<div class="paragraph">
<p>This service provides ISO 19115 metadata for the Dataset, if any can be
found. When invoked it returns an XML document containing ISO 19115
metadata located in the
<a href="https://docs.opendap.org/index.php?title=DAP4:_Responses#Dataset_Response">DAP4:
Dataset Response.</a></p>
</div>
<div class="paragraph">
<p>suffix = <code>.iso</code><br>
service url = <code>dataset_url + .iso</code><br>
role id = <code>http://services.opendap.org/dap4/iso-19115-metadata#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/xml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_iso_conformance_score_service">8.4. DAP4: ISO Conformance Score Service</h3>
<div class="paragraph">
<p>This service provides a browser renderable document that describes how
well the metadata held in the Dataset conforms to ISO 19115. When
invoked this service returns a browser renderable document that scores
how well the metadata held in the
<a href="https://docs.opendap.org/index.php?title=DAP4:_Responses#Dataset_Response">Dataset
Response</a> conforms to ISO 19115.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.rubric</code><br>
service url = <code>dataset_url + .rubric</code><br>
role id = <code>http://services.opendap.org/dap4/iso-19115-score#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/html</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_netcdf_file_out_service">8.5. DAP4: NetCDF File-out Service</h3>
<div class="paragraph">
<p>This service provides data responses in NetCDF-4 file format. When
invoked the regular DAP data response will be repackaged as a NetCDF 4
file.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.nc4</code><br>
service url = <code>dataset_url + '.nc4' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap4/netcdf-3#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>application/x-netcdf-4</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_ascii_data_service">8.6. DAP4: ASCII Data Service</h3>
<div class="paragraph">
<p>This service provides data responses in ASCII format. When invoked the
regular DAP data response will be repackaged as an ASCII representation
of the data values.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.ascii</code><br>
service url = <code>dataset_url + '.ascii' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap4/ascii#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/plain</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_xml_data_service">8.7. DAP4: XML Data Service</h3>
<div class="paragraph">
<p>This service provides data responses in XML format. When invoked the
constrained Dataset response document (DDX) will be marked up with the
data values of the request and returned. Large requests may be denied.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.xdap</code><br>
service url = <code>dataset_url + '.xdap' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap4/xml-data#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/xml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_native_file_access_service">8.8. DAP4: Native File Access Service</h3>
<div class="paragraph">
<p>This service provides direct access to the data source file (or whatever
else) that is creating the DAP dataset resource. When invoked it returns
the &#8220;native&#8221; data from whatever store (filesystem, etc.) it may be in.
Servers MAY elect to not support this response, for example, for
generated data, very large data, et cetera.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.file</code><br>
service url = <code>dataset_url + .file</code><br>
role id = <code>http://services.opendap.org/dap4/file#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: Type varies with file type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dap4_server_version_service">8.9. DAP4: Server Version Service</h3>
<div class="paragraph">
<p>This service provides software versioning information. When invoked the
service returns an XML file containing a description of the version of
the server and it’s components.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.ver</code><br>
service url = <code>dataset_url + .ver</code><br>
role id = <code>http://services.opendap.org/dap4/version#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/xml</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_dap2_services">8.10. DAP2 Services</h3>
<div class="paragraph">
<p>In order to support legacy client applications DAP4 server
implementations MAY support the DAP2 services stack. If they do so the
DAP2 services MUST be organized as described in this section.</p>
</div>
<div class="sect3">
<h4 id="_dap2_data_service">8.10.1. DAP2: Data Service</h4>
<div class="paragraph">
<p>The DAP2 data service provides DAP2 data access to the data resource.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.dods</code><br>
service url = <code>dataset_url + '.dods' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap2/dods#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>application/octet-stream</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_ddx_service">8.10.2. DAP2: DDX Service</h4>
<div class="paragraph">
<p>The DAP2 DDX service provides DAP2 access to the data resource metadata.
When invoked the service returns an XML document containing both
syntactic and semantic dataset metadata in DAP2 XML format.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.ddx</code><br>
service url = <code>dataset_url + .ddx</code><br>
role id = <code>http://services.opendap.org/dap2/ddx#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/xml</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_dds_service">8.10.3. DAP2: DDS Service</h4>
<div class="paragraph">
<p>The DAP2 DDS service provides access to the &#8216;syntactic&#8217; metadata (aka
use or structural metadata) for the data resource. When invoked returns
a DAP2 DDS response document conforming to the DDS part of the DAP2
specification.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.dds</code><br>
service url = <code>dataset_url + '.dds' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap2/dds#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/plain</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_das_service">8.10.4. DAP2: DAS Service</h4>
<div class="paragraph">
<p>The DAP2 DAS service provides access to the &#8216;semantic&#8217; metadata (aka
domain metadata) for the data resource. When invoked returns a DAP2 DAS
response document conforming to the DAS part of the DAP2 specification.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.das</code><br>
service url = <code>dataset_url + .das</code><br>
role id = <code>http://services.opendap.org/dap2/das#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/plain</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_ascii_data_service">8.10.5. DAP2: ASCII Data Service</h4>
<div class="paragraph">
<p>This service provides DAP2 data responses in ASCII format. When invoked
the regular DAP2 data response will be repackaged as an ASCII
representation of the data values.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.ascii</code><br>
service url = <code>dataset_url + '.ascii' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap2/ascii#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/plain</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_json_data_service">8.10.6. DAP2: JSON Data Service</h4>
<div class="paragraph">
<p>This service provides DAP2 data responses in w10n JSON format. When
invoked the regular DAP2 data response will be repackaged as an w10n
JSON representation of the data values.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.json</code><br>
service url = <code>dataset_url + '.json' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap2/json#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/plain</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_info_service">8.10.7. DAP2: Info Service</h4>
<div class="paragraph">
<p>The DAP2 INFO service provides a browser renderable page that combines
both the DAP2 &#8216;syntactic&#8217; and &#8216;semantic&#8217; metadata for the data
resource in a human readable way. When invoked this service returns a
web browser renderable document that combines both the DAP2
&#8216;syntactic&#8217; and &#8216;semantic&#8217; metadata for the data resource in a human
readable way.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.info</code><br>
service url = <code>dataset_url + .info</code><br>
role id = <code>http://services.opendap.org/dap2/Info#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>text/html</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dap2_netcdf_service">8.10.8. DAP2: NetCDF Service</h4>
<div class="paragraph">
<p>This service provides data responses in NetCDF-3 file format. When
invoked the regular DAP data response will be repackaged as a NetCDF 3
file.</p>
</div>
<div class="paragraph">
<p>suffix = <code>.nc</code><br>
service url = <code>dataset_url + '.nc' + [?dap_constraint]</code><br>
role id = <code>http://services.opendap.org/dap4/netcdf-3#</code></p>
</div>
<div class="paragraph">
<p>Default/primary media type: <code>application/x-netcdf</code></p>
</div>
<div class="paragraph">
<p><a href="https://docs.opendap.org/index.php?title=Template:ServiceTemplate">Template:
ServiceTemplate</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-10-23 19:49:39 -0700
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>